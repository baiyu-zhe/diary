// ❌亮色模式 有 呼吸灯动画效果
// ✅暗色模式 有 呼吸灯动画效果

$desktop-min-width: 1080px; // 移动端时，回退到 VitePress 默认样式

@mixin theme-transition($props: all) {
  transition: #{$props} var(--theme-duration, 0.35s) var(--theme-easing, ease-in-out);
}

@mixin set-css-var($name, $value) {
  --#{$name}: #{$value};
}

@function get-css-var($name, $fallback: null) {
  @if $fallback != null {
    @return var(--#{$name}, #{$fallback});
  }
  @return var(--#{$name});
}

@media (min-width: $desktop-min-width) {
  :root {
    @include set-css-var("theme-duration", 0.35s);
    @include set-css-var("theme-easing", ease-in-out);
    @include set-css-var("doc-card-radius", 20px);

    // 🌄 亮色模式 初始阴影色
    @include set-css-var("doc-card-shadow-light", rgba(11, 198, 255, 0.637));

    // 🌆 暗色模式 初始阴影色
    @include set-css-var("doc-card-shadow-dark", rgba(255, 0, 170, 0));

    // 🌄亮色卡片 背景颜色配置
    @include set-css-var("doc-card-bg-light", rgba(255, 255, 255, 0.055));

    // 🌆暗色卡片 背景颜色配置
    @include set-css-var("doc-card-bg-dark", rgba(0, 0, 0, 0.048));
  }

  // 🌄 呼吸灯动画 - 阴影颜色 - 亮色模式「只保留样式配置，但不生效」
  @keyframes breathing-shadow {
    0%,
    100% {
      box-shadow: 0 4px 16px rgba(11, 198, 255, 0.637);
    }
    50% {
      box-shadow: 0 4px 16px rgba(11, 198, 255, 0.637);
    }
  }

  // 🌆 呼吸灯动画 - 阴影颜色 - 暗色模式
  @keyframes breathing-shadow-dark {
    0%,
    100% {
      box-shadow: 0 4px 16px rgba(255, 0, 170, 0.35);
    }
    50% {
      box-shadow: 0 4px 16px rgba(255, 0, 170, 0.05);
    }
  }

  .VPDoc .content-container > main,
  .kp-card,
  .tk-article-update {
    position: relative;
    flex: 1;
    max-width: get-css-var("doc-max-width") !important;
    width: 100%;
    padding: 32px !important;
    margin-left: 0 !important;
    border-radius: get-css-var("doc-card-radius");
    background-color: get-css-var("doc-card-bg-light");
    overflow: hidden;
    box-shadow: 0 4px 16px get-css-var("doc-card-shadow-light");
  }

  html.dark {
    .VPDoc .content-container > main,
    .kp-card,
    .tk-article-update {
      background-color: get-css-var("doc-card-bg-dark");
      box-shadow: 0 4px 16px rgba(255, 0, 170, 0);

      // 🌆 暗色模式 呼吸灯 动画时间 配置项
      animation: breathing-shadow-dark 3s ease-in-out infinite;
    }
  }

  .VPDocFooter,
  .tk-article-appreciation.tk-article-appreciation--doc-after {
    width: 100%;
    margin-top: 16px;
    padding: 16px 0;
    border-radius: 0;
    background-color: transparent;
    box-shadow: none;
    @include theme-transition("background-color");
  }

  // 过渡效果
  html[layout-mode-animated="true"] {
    .VPNavBar > .wrapper > .container,
    .VPSidebar,
    .VPContent.has-sidebar,
    .VPDoc .container,
    .VPDoc.has-aside .content-container,
    .VPDocAsideOutline,
    .aside-wrapper {
      @include theme-transition("background-color, color");
    }
  }
}
